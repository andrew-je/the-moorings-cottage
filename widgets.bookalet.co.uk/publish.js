!function(t,e){"use strict";var env="production",o={debug:{baseUrl:"https://widgets.bookaletlocal.co.uk:44381",debug:!0},staging:{baseUrl:"https://widgets.bookaletdev.co.uk",debug:!1},production:{baseUrl:"https://widgets.bookalet.co.uk",debug:!1}},a=function(){};function r(t){var e=document.createElement("div");return e.setAttribute("id","bookaletLoading_"+t),e.style.width="100%",e.style.textAlign="center",e.innerHTML='<img src="'+o[env].baseUrl+'/Content/img/loading.gif" alt="Loading..." />',e}function n(t){var e=document.createElement("iframe");return e.setAttribute("id","bookaletFrame_"+t),e.setAttribute("scrolling","no"),e.setAttribute("border","0"),e.setAttribute("frameBorder","0"),e.height="30px",e.width="100%",e.setAttribute("style","border:0;visibility:hidden;width:100%;height:30px;"),e}function i(t,e){var a=o[env].baseUrl;return a=a+"/"+t,null!==e.property&&(a=a+"/"+e.property.toString()),null!==e.baseurl&&(a=a+"/"+e.baseurl.toString()),a=(a=a+"?Parent="+encodeURIComponent(document.location.href))+"&"+g(e),console.log(e),a}function l(t){if(t){var e=l(t.offsetParent);return[e[0]+t.offsetLeft,e[1]+t.offsetTop]}return[0,0]}function s(t){if(!document.getElementById("bookalet_Modal")){var e=JSON.parse(t),o=document.createElement("div"),a=" d='M12 .288l2.833 8.718h9.167l-7.417 5.389 2.833 8.718-7.416-5.388-7.417 5.388 2.833-8.718-7.416-5.389h9.167z' ";o.setAttribute("id","bookalet_Modal"),o.style.position="fixed",o.style.height="100%",o.style.width="100%",o.style.left="0",o.style.top="0",o.style.backgroundColor="rgba(0, 0, 0, 0.4)",o.style.textAlign="center",o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="wrap",o.style.justifyContent="center",o.style.alignItems="center",o.style.zIndex="1200";var r=document.createElement("div");return r.style.backgroundColor="white",r.style.color="#545454",r.style.position="relative",r.style.top=o.style.height-300,r.style.width="600px",r.style.maxWidth="90%",r.style.padding="20px",r.style.borderRadius="10px",r.style.textAlign="left",r.innerHTML=tmpl('<h3>{%#o.author%}</h3><i>{%=o.reviewdate%}</i><p>{%#o.review%}</p><br/><svg viewBox="0 0 130 30" preserveAspectRatio="xMinYMin meet" width="200px">{% for (var i=0; i<o.stars; i++) { %}  <path transform="translate({%=i*25%} 0)" fill="{%#o.fill%}" stroke="{%#o.stroke%}" '+a+"/> {% } %}</svg>",e),o.append(r),o.onclick=function(){document.getElementById("bookalet_Modal").remove()},o}}function d(t){t==e&&(t=8);for(var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",a="",r=0;r<t;r++){var n=Math.floor(Math.random()*o.length);a+=o.substring(n,n+1)}return a}function u(t,o){return t.hasAttribute!==e?t.hasAttribute(o):!(null===t.getAttribute(o)||""===t.getAttribute(o))}function g(t){var e="";for(var o in t)t.hasOwnProperty(o)&&null!=t[o]&&(e+=o+"="+t[o]+"&");return"&"==e.substring(e.length-1)&&(e=e.substring(0,e.length-1)),e}window.console||(window.console={log:a,info:a,warn:a,error:a}),t.init=function(){window.addEventListener?addEventListener("message",t.recieveMessage,!1):attachEvent("onmessage",t.recieveMessage);for(var e=document.getElementsByTagName("script"),a=null,l=0;l<e.length;++l)if(u(e[l],"data-bookalet")&&!u(e[l],"data-bookalet-loaded")){(a=e[l]).setAttribute("data-bookalet-loaded","true");break}if(a){var s=a.getAttribute("data-bookalet")+"_",g=d(),c=s+=g;"demo-"!=s.substring(0,5)&&"portal-"!=s.substring(0,7)||(c="00000000-0000-0000-0000-000000000000_"+g);for(var b,p={baseurl:null,property:null,propertyGroup:null,monthCount:null,colour:null,bgcolour:null,infourl:null,theme:null,arrival:null,departure:null,sleepsadults:null,sleepschildren:null,changeover:null,dayseitherside:null,location:null,facilities:null,owner:null,type:null,reviewCount:null,resultspage:null,gridview:null,showalldefault:null,title:null,modal:null},f=/\+/g,w=/([^&=]+)=?([^&]*)/g,h=function(t){return decodeURIComponent(t.replace(f," "))},y=window.location.search.substring(1);b=w.exec(y);){var v=h(b[1]).toLowerCase();(v in p||"pg_"==v.substring(0,3))&&(p[v]=h(b[2]))}if(u(a,"data-property")){var m=parseInt(a.getAttribute("data-property"));isNaN(m)||(p.property=m)}if(u(a,"data-propgroup")){var k=parseInt(a.getAttribute("data-propgroup"));isNaN(k)||(p.propertyGroup=k)}if(u(a,"data-monthcount")){var A=parseInt(a.getAttribute("data-monthcount"));isNaN(A)||(p.monthCount=A)}if(u(a,"data-theme")){var x=parseInt(a.getAttribute("data-theme"));isNaN(x)||(p.theme=x)}if(u(a,"data-colour")&&(p.colour=a.getAttribute("data-colour")),u(a,"data-bgcolour")&&(p.bgcolour=a.getAttribute("data-bgcolour")),u(a,"data-owner")){var N=parseInt(a.getAttribute("data-owner"));isNaN(N)||(p.owner=N)}if(u(a,"data-type")){var I=parseInt(a.getAttribute("data-type"));isNaN(I)||(p.type=I)}if(u(a,"data-infourl")&&(p.infourl=encodeURIComponent(a.getAttribute("data-infourl"))),u(a,"data-reviewcount")){var M=parseInt(a.getAttribute("data-reviewcount"));isNaN(M)||(p.reviewCount=M)}u(a,"data-resultspage")&&(p.resultspage=encodeURIComponent(a.getAttribute("data-resultspage"))),u(a,"data-grid")&&1==parseInt(a.getAttribute("data-grid"))&&(p.gridview=!0),u(a,"data-showalldefault")&&1==parseInt(a.getAttribute("data-showalldefault"))&&(p.showalldefault=!0),u(a,"data-title")&&(1==parseInt(a.getAttribute("data-title"))?p.title=!0:p.title=!1);var _=n(c);a.parentNode.insertBefore(_,a.nextSibling),a.parentNode.insertBefore(r(c),a.nextSibling),_.setAttribute("src",i(s,p))}else o[env].debug&&console.warn("Bookalet widget failed - script tag not found")},t.recieveMessage=function(t){if(t.origin===o[env].baseUrl){o[env].debug&&console.log("Bookalet Message Received:"+t.data);var e=t.data.toString().split("|"),a=e[0].toString(),r=e[1].toString(),n=e[2].toString(),i=document.getElementById("bookaletFrame_"+a),d=document.getElementById("bookaletLoading_"+a);if(null!==i&&null!==d){switch(r){case"scroll":var u=l(i),g=parseInt(n);isNaN(g)&&(g=0);var c=u[1]-50;c<0&&(c=0),c+=g,"function"==typeof window.bookalet_scrollTo?window.bookalet_scrollTo(u[0],c):window.scrollTo(u[0],c);break;case"height":i.height=n,i.style.height=n.toString()+"px",i.style.maxHeight=n.toString()+"px","function"==typeof window.bookalet_heightChanged&&window.bookalet_heightChanged(n);break;case"width":i.width=n,i.style.width=n;break;case"link":window.location=n;break;case"bookingMade":"function"==typeof window.bookalet_bookingMade&&window.bookalet_bookingMade(JSON.parse(n));break;case"enquiryMade":"function"==typeof window.bookalet_enquiryMade&&window.bookalet_enquiryMade(JSON.parse(n));break;case"titleChanged":"function"==typeof window.bookalet_titleChanged&&window.bookalet_titleChanged(n);break;case"popup":d.parentElement.insertBefore(s(n),null)}i.style.visibility="visible",d.style.display="none"}}else console.warn('"'+t.origin+'" does not match origin "'+o[env].baseUrl+'"')},t.init()}(window.bookalet=window.bookalet||{},void 0);
!function(e){"use strict";var n=function(e,t){var r=/[^\w\-.:]/.test(e)?new Function(n.arg+",tmpl","var _e=tmpl.encode"+n.helper+",_s='"+e.replace(n.regexp,n.func)+"';return _s;"):n.cache[e]=n.cache[e]||n(n.load(e));return t?r(t,n):function(e){return r(e,n)}};n.cache={},n.load=function(e){return document.getElementById(e).innerHTML},n.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,n.func=function(e,n,t,r,c,u){return n?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[n]||"\\"+n:t?"="===t?"'+_e("+r+")+'":"'+("+r+"==null?'':"+r+")+'":c?"';":u?"_s+='":void 0},n.encReg=/[<>&"'\x00]/g,n.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},n.encode=function(e){return(null==e?"":""+e).replace(n.encReg,(function(e){return n.encMap[e]||""}))},n.arg="o",n.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define((function(){return n})):"object"==typeof module&&module.exports?module.exports=n:e.tmpl=n}(this);